read image "dots.png" to sample[H,W]
write image array[i:H,j:W] rgba{ (sum[i1:3,j1:3] (array[a: 3, b: 3] if (i+a-1)>=0 && (i+a-1)<H && (j+b-1)>=0 && (j+b-1)<W then sample[i+a-1,j+b-1] else rgba {0., 0., 0., 0.})[i1,j1].r) / (sum[i11:3,j11:3] (array[a: 3, b: 3] if (i+a-1)>=0 && (i+a-1)<H && (j+b-1)>=0 && (j+b-1)<W then sample[i+a-1,j+b-1] else rgba {0., 0., 0., 0.})[i11,j11].a), (sum[i1:3,j1:3] (array[a: 3, b: 3] if (i+a-1)>=0 && (i+a-1)<H && (j+b-1)>=0 && (j+b-1)<W then sample[i+a-1,j+b-1] else rgba {0., 0., 0., 0.})[i1,j1].g) / sum[i11:3,j11:3] (array[a: 3, b: 3] if (i+a-1)>=0 && (i+a-1)<H && (j+b-1)>=0 && (j+b-1)<W then sample[i+a-1,j+b-1] else rgba {0., 0., 0., 0.})[i11,j11].a, (sum[i1:3,j1:3] (array[a: 3, b: 3] if (i+a-1)>=0 && (i+a-1)<H && (j+b-1)>=0 && (j+b-1)<W then sample[i+a-1,j+b-1] else rgba {0., 0., 0., 0.})[i1,j1].b) / sum[i11: 3, j11: 3] (array[a: 3, b: 3] if (i+a-1)>=0 && (i+a-1)<H && (j+b-1)>=0 && (j+b-1)<W then sample[i+a-1,j+b-1] else rgba {0., 0., 0., 0.})[i11,j11].a, 1.0 } to "dots-blurry.png"
